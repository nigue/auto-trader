<!DOCTYPE html>
<html lang="en"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">
<h:head>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (typeof faces !== 'undefined' &amp;&amp; faces.ajax) {
                console.log('El objeto faces está disponible.');
            } else {
                console.error('El objeto faces no está disponible.');
            }
        });
        function monitor(data) {
            console.log('monitor at: ' + Date.now());
            var loading = document.getElementById("image");
            if (data.status == "begin") {
                loading.style.display = "block";
            } else if (data.status == "success") {
                loading.style.display = "none";
            }
        }
    </script>
</h:head>
<h:body>
    <f:view>
        <h1>JavaBeat JSF 2.2 Examples</h1>
        <h2>JSF2 Ajax Monitoring Example</h2>
        <h:form id="login-form" prependId="false">
            <h:inputText id="input" value="#{login.message}"/>
            <h:commandButton value="Display Text" action="#{login.action}">
                <f:ajax execute="@this input" render="output" onevent="monitor"/>
                <f:ajax execute="@this input" render="login-error" onevent="monitor"/>
            </h:commandButton>
            <h:outputText id="output" value="#{login.message}"/>
            <h:graphicImage id="image"
                            value="#{resource['images:ajax-loader.gif']}"
                            style="display:none;"/>
            <h:messages id="login-error" globalOnly="true"/>
        </h:form>
    </f:view>
</h:body>
</html>
